<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <title>Login</title>
</head>

<body>
  <div class="jumbotron container mt-3">
    <div class="d-flex flex-row-reverse">
      <button class="btn btn-primary " id="toggleBtn">Registrarse!</button>
    </div>
    <form action="/auth/login" method="post" id="loginForm">
      <h3>Ingrese:</h3>
      <label for="username">Email</label>
      <input type="email" required name="username" class="form-control">
      <label for="password">Contraseña</label>
      <input type="password" required name="password" class="form-control">
      <input type="submit" value=" Ingresar! " class="btn btn-success">
    </form>

    <div id="registerForm">
      <form action="/auth/register" method="post" enctype="multipart/form-data">
        <h3>Registrese:</h3>
        <label for="username">Email</label>
        <input type="email" name="username" required class="form-control">

        <label for="name">Nombre</label>
        <input type="text" name="name" required class="form-control">

        <label for="password">Contraseña:</label>
        <input id="pass1" type="password" name="password" required class="form-control" />

        <label for="repeatPassword">Repetir Contraseña:</label>
        <input id="pass2" type="password" name="repeatPassword" required class="form-control" />

        <label for="address">Direccion:</label>
        <input type="text" name="address" required class="form-control">

        <label for="phone">Numero:</label>
        <input id="phone" type="tel" required name="phone" class="form-control" />
        <br>
        <input id="submitButton" type="submit" value="Confirmar" class="btn btn-success" />
      </form>
    </div>
  </div>
  <script id="regionalNumber">
    const phoneInputField = document.querySelector("#phone");
    const phoneInput = window.intlTelInput(phoneInputField, {
      preferredCountries: ["ar", "co", "br", "pe", "uy"],
      utilsScript:
        "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js",
    });
    phoneInputField.addEventListener('input', () => {
      const phoneNumber = phoneInput.getNumber();
      phoneInputField.value = ""
      phoneInputField.value = phoneNumber
    })

  </script>
  <script id="loginToggle">
    let choice = true;
    const loginForm = document.getElementById('loginForm')
    const registerForm = document.getElementById('registerForm')
    const toggleBtn = document.getElementById('toggleBtn')

    loginForm.style.display = 'block'
    registerForm.style.display = 'none'

    toggleBtn.addEventListener('click', toggleBox)

    function toggleBox() {
      if (choice) {
        loginForm.style.display = 'none'
        registerForm.style.display = 'block'
        toggleBtn.textContent = 'Loguearse'
        choice = false
      } else {
        loginForm.style.display = 'block'
        registerForm.style.display = 'none'
        toggleBtn.textContent = 'Registrase'
        choice = true
      }
    }

  </script>
  <script id="passwordCheck">
    const pass1 = document.getElementById('pass1');
    const pass2 = document.getElementById('pass2');
    const submitButton = document.getElementById('submitButton')
    
    function validatePassword(){
      if(pass1.value == '' || pass2.value == ''){
        submitButton.disabled = true;
      }if(pass1.value != pass2.value){
        submitButton.disabled = true;
        pass2.style.borderColor= 'red'
      }else{
        submitButton.disabled = false;
        pass2.style.borderColor= 'green'
        submitButton.style.backgroundColor = 'green';
      }
    }
    pass1.onkeyup = validatePassword;
    pass2.onkeyup = validatePassword;
  </script>
  </div>
</body>

</html>